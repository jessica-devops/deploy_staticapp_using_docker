pipeline{
    agent any
    parameters{
        string( name: 'VERSION' , defaultValue: '1.0.0')
    }

    stages{

        stage("Build & push"){
            steps{
                script{
                    // This step should not normally be used in your script. Consult the inline help for details.
                        withDockerRegistry(credentialsId: 'dockerhuub-id') {
                             sh "docker build -t myapp:${params.VERSION} ."
                             sh "docker tag myapp:${params.VERSION} jessica94/myapp:${params.VERSION}"
                             sh "docker push jessica94/myapp:${params.VERSION}"
            }
         }  
        }
    }
}
}